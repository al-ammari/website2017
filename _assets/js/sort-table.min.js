!function(a){a.tablesort=function(b,c){var d=this;this.$table=b,this.$thead=this.$table.find("thead"),this.settings=a.extend({},a.tablesort.defaults,c),this.$sortCells=this.$thead.length>0?this.$thead.find("th:not(.no-sort)"):this.$table.find("th:not(.no-sort)"),this.$sortCells.on("click.tablesort",function(){d.sort(a(this))}),this.index=null,this.$th=null,this.direction=null},a.tablesort.prototype={sort:function(b,c){var d=new Date,e=this,f=this.$table,g=f.find("tbody").length>0?f.find("tbody"):f,h=g.find("tr").has("td, th"),i=h.find(":nth-child("+(b.index()+1)+")").filter("td, th"),j=b.data().sortBy,k=[],l=i.map(function(c,d){return j?"function"==typeof j?j(a(b),a(d),e):j:null!=a(this).data().sortValue?a(this).data().sortValue:a(this).text()});0!==l.length&&(this.index!==b.index()?(this.direction="asc",this.index=b.index()):"asc"!==c&&"desc"!==c?this.direction="asc"===this.direction?"desc":"asc":this.direction=c,c="asc"==this.direction?1:-1,e.$table.trigger("tablesort:start",[e]),e.log("Sorting by "+this.index+" "+this.direction),e.$table.css("display"),setTimeout(function(){e.$sortCells.removeClass(e.settings.asc+" "+e.settings.desc);for(var f=0,j=l.length;f<j;f++)k.push({index:f,cell:i[f],row:h[f],value:l[f]});k.sort(function(a,b){return e.settings.compare(a.value,b.value)*c}),a.each(k,function(a,b){g.append(b.row)}),b.addClass(e.settings[e.direction]),e.log("Sort finished in "+((new Date).getTime()-d.getTime())+"ms"),e.$table.trigger("tablesort:complete",[e]),e.$table.css("display")},l.length>2e3?200:10))},log:function(b){(a.tablesort.DEBUG||this.settings.debug)&&console&&console.log&&console.log("[tablesort] "+b)},destroy:function(){return this.$sortCells.off("click.tablesort"),this.$table.data("tablesort",null),null}},a.tablesort.DEBUG=!1,a.tablesort.defaults={debug:a.tablesort.DEBUG,asc:"sorted ascending",desc:"sorted descending",compare:function(a,b){return a>b?1:a<b?-1:0}},a.fn.tablesort=function(b){var c,d;return this.each(function(){c=a(this),d=c.data("tablesort"),d&&d.destroy(),c.data("tablesort",new a.tablesort(c,b))})}}(window.Zepto||window.jQuery);