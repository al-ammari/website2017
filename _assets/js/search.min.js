const constraints=[{name:"boolean",options:[{value:"does",display:"Does"},{value:"doesNot",display:"Does not"}]},{name:"position",options:[{value:"originate",display:"Originate"},{value:"terminate",display:"Terminate"},{value:"goVia",display:"Goes via"},{value:"contain",display:"Contain"}]},{name:"kind",options:[{value:"submitter",display:"Submitter name"},{value:"zipCodeSubmitter",display:"Submitter postcode"},{value:"ISP",display:"ISP/Carrier"},{value:"city",display:"City"},{value:"region",display:"Province/State"},{value:"country",display:"Country"},{value:"zipCode",display:"Postcode"},{value:"hostName",display:"Hostname"},{value:"destHostName",display:"Destination hostname"},{value:"ipAddr",display:"IP address"},{value:"asnum",display:"AS number"},{value:"trId",display:"Traceroute id"}]},{name:"input",options:[]},{name:"join",options:[{value:"and",display:"AND"},{value:"or",display:"OR"}]}];var createASRow=function(a){var b=$("<div/>");b.addClass("advanced input-holder"),_.each(constraints,function(a){var c=$("<div/>");if(c.addClass("advanced-input constraint-container constraint-"+a.name),jQuery(c).data("constraint",a.name),$(b).append(c),"input"===a.name){var d='<div class="ui fluid input"><input class="constraint-value" type="text" placeholder="Hostname"></div>';$(c).append(d)}else{var e=$("<select/>");e.addClass("constraint-value ui fluid dropdown"),_.each(a.options,function(a){e.append(new Option(a.display,a.value,!0,!0))}),$(c).append(e)}});var c=$("<div/>");c.addClass("advanced-input constraint-buttons");var d=$("<button/>");d.addClass("circular ui icon button"),"first"===a?($(d).append('<i class="create-search-row-btn icon settings"><img src="_assets/img/icn-add.svg" alt="add"></i>'),$(d).click(function(){createASRow()})):($(d).append('<i class="destroy-search-row-btn icon settings"><img src="_assets/img/icn-remove.svg" alt="remove"></i>'),$(d).click(function(){$(b).remove()})),$(c).append(d),$(b).append(c),$("#as-search-container").append(b)},constructBS=function(){var a={},b=1;$("#bs-originate-popup .bs-input").each(function(c,d){if(""!=$(d).val()){var e={constraint1:"does",constraint2:"originate",constraint3:$(d).data("constraint"),constraint4:$(d).val(),constraint5:"AND"};a["filter-constraint-"+b]=e,b++}}),$("#bs-via-popup .bs-input").each(function(c,d){if(""!=$(d).val()){var e={constraint1:"does",constraint2:"goVia",constraint3:$(d).data("constraint"),constraint4:$(d).val(),constraint5:"AND"};a["filter-constraint-"+b]=e,b++}}),$("#bs-terminate-popup .bs-input").each(function(c,d){if(""!=$(d).val()){var e={constraint1:"does",constraint2:"terminate",constraint3:$(d).data("constraint"),constraint4:$(d).val(),constraint5:"AND"};a["filter-constraint-"+b]=e,b++}}),_.isEmpty(a)?$().toastmessage("showErrorToast","Please fill in at least one search term field to query the database."):submitQuery(a)},constructAS=function(){var a={},b=0,c=0;jQuery(".constraint").removeClass("blank-field-error"),jQuery("#as-search-container .input-holder").each(function(d,e){b++;var f=0;console.log(d,jQuery(e));var g={};_.each(jQuery(e).children(".constraint-container"),function(a){f++;var b=jQuery(a).find(".constraint-value");jQuery(b).val()?g["constraint"+f]=b.val():(c++,jQuery(a).children().addClass("blank-field-error"))}),a["filter-constraint"+b]=g}),0===c?submitQuery(a):$().toastmessage("showErrorToast","One or more fields were not filled. Submission canceled.")},submitQuery=function(a){console.log("Submitting query of "+JSON.stringify(a))};